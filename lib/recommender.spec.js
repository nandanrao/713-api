'use strict';

// spec

var chai = require('chai');
chai.use(require('sinon-chai'));
var expect = chai.expect;
var sinon = require('sinon');
var proxyquire = require('proxyquire');
var _ = require('lodash');
var Promise = require('bluebird');

var recommender = require('./recommender');

describe('recommender', function () {

  describe('takeRandom', function () {
    it('takes to proper amount', function () {
      var ans = recommender.takeRandom(['pop', 'rock', 'glam', 'rap', 'europop'], 2);
      expect(ans.length).to.equal(2);
    });
  });

  describe('takeRandom', function () {
    it('filters by proper genres', function () {
      var ans = recommender.formatList(['rock', 'glam'], ['dance pop', 'rock', 'glam', 'rap', 'europop'], 3);
      expect(ans).to.contain('glam');
      expect(ans).to.be.a.string;
    });
  });

  describe('getRange', function () {
    it('does things', function () {
      var ans = recommender.getRange('speechiness', .6);
      expect(ans).to.deep.equal({
        max_speechiness: 0.66,
        min_speechiness: 0.54
      });
    });
  });

  describe('convertObject', function () {
    it('does thigns', function () {
      var cnf = { 'acousticness': 0.054085000000000001,
        'danceability': 0.71066666666666656,
        'energy': 0.78449999999999998,
        'instrumentalness': 0.038548516666666664,
        'liveness': 0.22714999999999999,
        'loudness': -6.2898333333333332,
        'popularity': 69.666666666666671,
        'speechiness': 0.061950000000000005,
        'tempo': 115.81750000000001,
        'valence': 0.56716666666666671 };
      var ans = recommender.convert(cnf);
      expect(ans).to.have.property('min_acousticness');
      console.log(ans);
    });
  });
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZWNvbW1lbmRlci5zcGVjLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFFQSxJQUFJLE9BQU8sUUFBUSxNQUFSLENBQVg7QUFDQSxLQUFLLEdBQUwsQ0FBUyxRQUFRLFlBQVIsQ0FBVDtBQUNBLElBQUksU0FBUyxLQUFLLE1BQWxCO0FBQ0EsSUFBSSxRQUFRLFFBQVEsT0FBUixDQUFaO0FBQ0EsSUFBSSxhQUFhLFFBQVEsWUFBUixDQUFqQjtBQUNBLElBQUksSUFBSSxRQUFRLFFBQVIsQ0FBUjtBQUNBLElBQUksVUFBVSxRQUFRLFVBQVIsQ0FBZDs7QUFHQSxJQUFJLGNBQWMsUUFBUSxlQUFSLENBQWxCOztBQUVBLFNBQVMsYUFBVCxFQUF3QixZQUFNOztBQUU1QixXQUFTLFlBQVQsRUFBc0IsWUFBTTtBQUMxQixPQUFHLHdCQUFILEVBQTZCLFlBQU07QUFDakMsVUFBSSxNQUFNLFlBQVksVUFBWixDQUF1QixDQUFDLEtBQUQsRUFBUSxNQUFSLEVBQWdCLE1BQWhCLEVBQXdCLEtBQXhCLEVBQStCLFNBQS9CLENBQXZCLEVBQWtFLENBQWxFLENBQVY7QUFDQSxhQUFPLElBQUksTUFBWCxFQUFtQixFQUFuQixDQUFzQixLQUF0QixDQUE0QixDQUE1QjtBQUNELEtBSEQ7QUFJRCxHQUxEOztBQU9BLFdBQVMsWUFBVCxFQUFzQixZQUFNO0FBQzFCLE9BQUcsMEJBQUgsRUFBK0IsWUFBTTtBQUNuQyxVQUFJLE1BQU0sWUFBWSxVQUFaLENBQXVCLENBQUMsTUFBRCxFQUFTLE1BQVQsQ0FBdkIsRUFBeUMsQ0FBQyxXQUFELEVBQWMsTUFBZCxFQUFzQixNQUF0QixFQUE4QixLQUE5QixFQUFxQyxTQUFyQyxDQUF6QyxFQUEwRixDQUExRixDQUFWO0FBQ0EsYUFBTyxHQUFQLEVBQVksRUFBWixDQUFlLE9BQWYsQ0FBdUIsTUFBdkI7QUFDQSxhQUFPLEdBQVAsRUFBWSxFQUFaLENBQWUsRUFBZixDQUFrQixDQUFsQixDQUFvQixNQUFwQjtBQUNELEtBSkQ7QUFLRCxHQU5EOztBQVFBLFdBQVMsVUFBVCxFQUFxQixZQUFNO0FBQ3pCLE9BQUcsYUFBSCxFQUFrQixZQUFNO0FBQ3RCLFVBQUksTUFBTSxZQUFZLFFBQVosQ0FBcUIsYUFBckIsRUFBb0MsRUFBcEMsQ0FBVjtBQUNBLGFBQU8sR0FBUCxFQUFZLEVBQVosQ0FBZSxJQUFmLENBQW9CLEtBQXBCLENBQTBCO0FBQ3hCLHlCQUFpQixJQURPO0FBRXhCLHlCQUFpQjtBQUZPLE9BQTFCO0FBSUQsS0FORDtBQU9ELEdBUkQ7O0FBVUEsV0FBUyxlQUFULEVBQTBCLFlBQU07QUFDOUIsT0FBRyxhQUFILEVBQWtCLFlBQU07QUFDdEIsVUFBSSxNQUFNLEVBQUMsZ0JBQWdCLG9CQUFqQjtBQUNDLHdCQUFnQixtQkFEakI7QUFFQyxrQkFBVSxtQkFGWDtBQUdDLDRCQUFvQixvQkFIckI7QUFJQyxvQkFBWSxtQkFKYjtBQUtDLG9CQUFZLENBQUMsa0JBTGQ7QUFNQyxzQkFBYyxrQkFOZjtBQU9DLHVCQUFlLG9CQVBoQjtBQVFDLGlCQUFTLGtCQVJWO0FBU0MsbUJBQVcsbUJBVFosRUFBVjtBQVVBLFVBQUksTUFBTSxZQUFZLE9BQVosQ0FBb0IsR0FBcEIsQ0FBVjtBQUNBLGFBQU8sR0FBUCxFQUFZLEVBQVosQ0FBZSxJQUFmLENBQW9CLFFBQXBCLENBQTZCLGtCQUE3QjtBQUNBLGNBQVEsR0FBUixDQUFZLEdBQVo7QUFDRCxLQWREO0FBZUQsR0FoQkQ7QUFrQkQsQ0E3Q0QiLCJmaWxlIjoicmVjb21tZW5kZXIuc3BlYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIHNwZWNcblxudmFyIGNoYWkgPSByZXF1aXJlKCdjaGFpJyk7XG5jaGFpLnVzZShyZXF1aXJlKCdzaW5vbi1jaGFpJykpO1xudmFyIGV4cGVjdCA9IGNoYWkuZXhwZWN0O1xudmFyIHNpbm9uID0gcmVxdWlyZSgnc2lub24nKTtcbnZhciBwcm94eXF1aXJlID0gcmVxdWlyZSgncHJveHlxdWlyZScpO1xudmFyIF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbnZhciBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcblxuXG52YXIgcmVjb21tZW5kZXIgPSByZXF1aXJlKCcuL3JlY29tbWVuZGVyJyk7XG5cbmRlc2NyaWJlKCdyZWNvbW1lbmRlcicsICgpID0+IHtcblxuICBkZXNjcmliZSgndGFrZVJhbmRvbScsKCkgPT4ge1xuICAgIGl0KCd0YWtlcyB0byBwcm9wZXIgYW1vdW50JywgKCkgPT4ge1xuICAgICAgdmFyIGFucyA9IHJlY29tbWVuZGVyLnRha2VSYW5kb20oWydwb3AnLCAncm9jaycsICdnbGFtJywgJ3JhcCcsICdldXJvcG9wJ10sIDIpXG4gICAgICBleHBlY3QoYW5zLmxlbmd0aCkudG8uZXF1YWwoMik7XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgndGFrZVJhbmRvbScsKCkgPT4ge1xuICAgIGl0KCdmaWx0ZXJzIGJ5IHByb3BlciBnZW5yZXMnLCAoKSA9PiB7XG4gICAgICB2YXIgYW5zID0gcmVjb21tZW5kZXIuZm9ybWF0TGlzdChbJ3JvY2snLCAnZ2xhbSddLCBbJ2RhbmNlIHBvcCcsICdyb2NrJywgJ2dsYW0nLCAncmFwJywgJ2V1cm9wb3AnXSwgMylcbiAgICAgIGV4cGVjdChhbnMpLnRvLmNvbnRhaW4oJ2dsYW0nKVxuICAgICAgZXhwZWN0KGFucykudG8uYmUuYS5zdHJpbmc7XG4gICAgfSlcbiAgfSlcblxuICBkZXNjcmliZSgnZ2V0UmFuZ2UnLCAoKSA9PiB7XG4gICAgaXQoJ2RvZXMgdGhpbmdzJywgKCkgPT4ge1xuICAgICAgdmFyIGFucyA9IHJlY29tbWVuZGVyLmdldFJhbmdlKCdzcGVlY2hpbmVzcycsIC42KTtcbiAgICAgIGV4cGVjdChhbnMpLnRvLmRlZXAuZXF1YWwoe1xuICAgICAgICBtYXhfc3BlZWNoaW5lc3M6IDAuNjYsXG4gICAgICAgIG1pbl9zcGVlY2hpbmVzczogMC41NFxuICAgICAgfSlcbiAgICB9KVxuICB9KVxuXG4gIGRlc2NyaWJlKCdjb252ZXJ0T2JqZWN0JywgKCkgPT4ge1xuICAgIGl0KCdkb2VzIHRoaWducycsICgpID0+IHtcbiAgICAgIHZhciBjbmYgPSB7J2Fjb3VzdGljbmVzcyc6IDAuMDU0MDg1MDAwMDAwMDAwMDAxLFxuICAgICAgICAgICAgICAgICAnZGFuY2VhYmlsaXR5JzogMC43MTA2NjY2NjY2NjY2NjY1NixcbiAgICAgICAgICAgICAgICAgJ2VuZXJneSc6IDAuNzg0NDk5OTk5OTk5OTk5OTgsXG4gICAgICAgICAgICAgICAgICdpbnN0cnVtZW50YWxuZXNzJzogMC4wMzg1NDg1MTY2NjY2NjY2NjQsXG4gICAgICAgICAgICAgICAgICdsaXZlbmVzcyc6IDAuMjI3MTQ5OTk5OTk5OTk5OTksXG4gICAgICAgICAgICAgICAgICdsb3VkbmVzcyc6IC02LjI4OTgzMzMzMzMzMzMzMzIsXG4gICAgICAgICAgICAgICAgICdwb3B1bGFyaXR5JzogNjkuNjY2NjY2NjY2NjY2NjcxLFxuICAgICAgICAgICAgICAgICAnc3BlZWNoaW5lc3MnOiAwLjA2MTk1MDAwMDAwMDAwMDAwNSxcbiAgICAgICAgICAgICAgICAgJ3RlbXBvJzogMTE1LjgxNzUwMDAwMDAwMDAxLFxuICAgICAgICAgICAgICAgICAndmFsZW5jZSc6IDAuNTY3MTY2NjY2NjY2NjY2NzF9XG4gICAgICB2YXIgYW5zID0gcmVjb21tZW5kZXIuY29udmVydChjbmYpO1xuICAgICAgZXhwZWN0KGFucykudG8uaGF2ZS5wcm9wZXJ0eSgnbWluX2Fjb3VzdGljbmVzcycpXG4gICAgICBjb25zb2xlLmxvZyhhbnMpXG4gICAgfSlcbiAgfSlcblxufSlcbiJdfQ==